---
import TubeLinePageLayout from "../layouts/TubeLinePageLayout.astro";
import { getTubeLineRoastPosts } from "../lib/getTubeLineRoastPosts";
import { organiseComments } from "../lib/utils";

export const prerender = true;

import { getSinglePageData } from "../lib/getSinglePageData";

const variables = { id: "7038" };
const singlePage = await getSinglePageData({ variables });

const victoriaLineStations = [
  "Walthamstow Central",
  "Blackhorse Road",
  "Tottenham Hale",
  "Seven Sisters",
  "Finsbury Park",
  "Highbury & Islington",
  "King's Cross",
  "Euston",
  "Warren Street",
  "Oxford Circus",
  "Green Park",
  "Victoria",
  "Pimlico",
  "Vauxhall",
  "Stockwell",
  "Brixton",
];

const roastPosts = await getTubeLineRoastPosts(victoriaLineStations);

const threadedComments = organiseComments(singlePage.comments.nodes);
---

<TubeLinePageLayout
  singlePage={singlePage}
  lineName="Victoria"
  headingClass="piccadilly"
  stations={victoriaLineStations}
  roastPosts={roastPosts}
  threadedComments={threadedComments}
/>
