---
import TubeLinePageLayout from "../layouts/TubeLinePageLayout.astro";
export const prerender = true;

import { getSinglePageData } from "../lib/getSinglePageData";
import { getTubeLineRoastPosts } from "../lib/getTubeLineRoastPosts";
import { organiseComments } from "../lib/utils";

const variables = { id: "7009" };
const singlePage = await getSinglePageData({ variables });

const metropolitanLineStations = [
  "Watford",
  "Croxley",
  "Amersham",
  "Chesham",
  "Chalfont And Latimer",
  "Chorleywood",
  "Rickmansworth",
  "Moor Park",
  "Northwood",
  "Northwood Hills",
  "Pinner",
  "North Harrow",
  "Uxbridge",
  "Hillingdon",
  "Ickenham",
  "Ruislip",
  "Ruislip Manor",
  "Eastcote",
  "Rayners Lane",
  "West Harrow",
  "Harrow-On-The-Hill",
  "Northwick Park",
  "Preston Road",
  "Wembley Park",
  "Finchley Road",
  "Baker Street",
  "Great Portland Street",
  "Euston Square",
  "King's Cross",
  "Farringdon",
  "Barbican",
  "Moorgate",
  "Liverpool Street",
  "Aldgate",
];

const roastPosts = await getTubeLineRoastPosts(metropolitanLineStations);

const threadedComments = organiseComments(singlePage.comments.nodes);
---

<TubeLinePageLayout
  singlePage={singlePage}
  lineName="Metropolitan"
  headingClass="metropolitan"
  stations={metropolitanLineStations}
  roastPosts={roastPosts}
  threadedComments={threadedComments}
/>
