---
import type { Post } from "../types";

type Props = {
  posts: Post[];
};

const { posts } = Astro.props as Props;
---

{
  posts.map((post) => (
    <div class="best-container">
      <div class="best-container-details">
        <h2>
          <a href={`/${post.slug}`}>{post.title}</a>
        </h2>

        {post.highlights?.loved && (
          <div class="post-summary-block highlight-block">
            <p>
              <strong>Loved:</strong> {post.highlights.loved}
            </p>
            {post.highlights.loathed && (
              <p>
                <strong>Loathed:</strong> {post.highlights.loathed}
              </p>
            )}
          </div>
        )}

        <p>
          <strong>Rating:</strong>{" "}
          {parseFloat(post?.ratings?.nodes[0].name || "").toFixed(2)}
        </p>

        {post.yearsOfVisit?.nodes?.[0]?.name && (
          <p>
            <strong>Year visited:</strong> {post.yearsOfVisit.nodes[0].name}
          </p>
        )}
      </div>

      {post.featuredImage?.node?.sourceUrl && (
        <div class="best-container-image">
          <img
            src={post.featuredImage.node.sourceUrl}
            alt={post.featuredImage.node.altText || `Image for ${post.title}`}
          />
        </div>
      )}
    </div>
  ))
}
